<div id="view-testing">

<!-- participant definition modal -->


<div class="modal" ng-model="live" ng-hide="live">

	<div class="module one-third">&nbsp;</div>
	
	<div class="module two-fifths modal-interior">
		
		<div class="modal-interior-title">
			<h2 class="text-center">Run a new test</h2>
		</div>
		
		<ul class="nobullets" ng-model="subject">
			<li ng-class='{"half": kind === "prototype", "full" : kind !== "prototype"}'>
				<label>Participant's name</label>
				<input class="input" type="text" name="participantname" value="" placeholder="Name of the person you’re testing with" ng-model="subject.name"/>
				</input>
			</li>

			<li class="half" ng-show="kind === 'prototype'">
				<label>Room ID</label><span class="info large-tooltip" data-tooltip-large="You’ll find this in the Field Guide iOS app"><span>?</span></span>
				<input class="input" type="text" name="testroom" value="" placeholder="Field Guide app Room ID" ng-model="subject.testroom">
				</input>
			</li>
				<div class="clear"></div>

				<div class="cta-margin">
					<a href="#" class="secondary button-cancel" ng-click="changeOnboard(100)" tabindex="1">Cancel</a>

					<!-- <a class="button dry-run med" type="submit" ng-click="addSubject(subject); changeOnboard(2)">Dry Run</a> -->
			
					<button class="button med float-right" type="submit" ng-click="addSubject(subject); changeOnboard(2)" tabindex="0">Start test</button>
			</div>
		</ul>
		
	</div>
	
	<div class="clear"></div>
</div>
<!-- / participant definition modal -->



<!-- New task modal -->
<div class="modal" ng-model="new_task" ng-show="adding_task == true">
    <div class="module third">&nbsp;</div>
    
    <div class="module third modal-interior">
        
        <div class="modal-interior-title">
        	<h3 class="float-left">Add a new task</h3>
        	<h3 class="float-right" ng-click="adding_task = false"><strong>&times;</strong></h3>
        	<div class="clear"></div>
        </div>
        
        <form>
			<ul class="nobullets lined">
				<li>
					<input class="input" placeholder="Your new task name" ng-trim="false" ng-model="new_task.name">
				</li>
				<li>
					<textarea ng-model="new_task.desc" class="input small" id="field-textarea" placeholder="Put talking points or task-specific questions here.">
					</textarea>
				</li>
				<li class="text-center">
					<button class="button" type="submit"  ng-Click="addTask(new_task)">Create task</button>
				</li>
			</ul>
		</form>

    </div>
    
    <div class="clear"></div>
</div>
<!-- / New task modal -->

<!-- 	<div id="button-newtask">
		<div class="expand-button">
			<div class="expand-button-body" ng-click="adding_task = true">+</div>
			<div class="expand-button-helper">Add a new task</div>
		</div>
	</div> -->
	
	<!-- discussion guide -->
	<div id="testing-guide" ng-model="tests">
		
		<div id="tasklist">
						
			<ul>
				<li class="title"><div class="participant-avatar"><span ng-model="initials">{{subject.initials}}</span></div>
					<h3 class="participant-name">{{subject.name}}</h3>
				</li>
				
				<li class="no-highlite">
					<h5>Objectives</h5>
					<pre class="objectives">{{test.desc}}</pre>
				</li>

				<li class="no-highlite">
					<h5>Tasks</h5>
				</li>
				
				<li ng-repeat="obj in navlist" ng-class="{ 'active': obj._id === selected._id }" ng-click="select($index)">
					<h3 class="tag-name">#{{obj.name}}</h3>

					<p ng-bind-html="obj.desc | linebreaker"></p>
				</li>
			</ul>
			
		</div>
			
	</div>
	<!-- / discussion guide -->
	
	
	
	
	
	<div class="sheet-holder">
		<div class="sheet">
		
			<!-- note input and display -->
			<div id="testing-input">
					
				<!-- input notes -->
				<div id="session-input">
					<textarea class="input" ng-model='message' name="field-input" placeholder="Remember to give your notes #themes" ui-keypress="{13:'postMessage(message)'}" class="form-control"/>
					</textarea>
			
				<div id="hash-tag-pool">
					<small ng-repeat="tag in tags" class="hashtag">#{{tag.name}}</small>
				</div>
				</div>
				
				<!-- timeline -->
				<div id="timeline" scroll-glue="glued">
					<ul>
						
						<!-- empty state -->
						<li class="message-no-highlite" id="firstrun">
							<div class="message-body">
								<strong>Your test is running!</strong> Remember, it&rsquo;s all about capturing notes &mdash;
								you&rsquo;ll have an opportunity to <strong>edit and sort</strong> when creating your Report. 
								Use <span class="tag">#hashtags</span> to capture themes in your notes.
							</div>
							<div class="clear"></div>
						</li>				
						<!-- /empty state -->
						
						<!-- non-editable guideline messages -->
						<li class="message-no-highlite">
							<div class="message-body" ng-click="editMessage(message)">
								<small>Starting Test</small>
								<p>{{test.name}}</p>
							</div>

							<div class="clear"></div>
						</li>
						<li class="message" ng-repeat="message in timeline track by $index" ng-class="{'message-no-highlite' : message.title === 'Starting task', 'message-highlite' : message.title !== 'Starting task'}">

							<div class="message-body" ng-click="editMessage(message)">

								<pre class="messages" ng-if="message.title === 'Starting task'">
									<h3>#{{message.body}}</h3>
								</pre>

								<!-- Editable messages - if a message is not a guideline -->
								<pre class="messages" ng-if="message.title !== 'Starting task'" ng-bind-html="message.body | hashtag" ng-show="messageEditToggle != message._id"></pre>
								<textarea msd-elastic class="input" ng-if="message.title !== 'Starting task'" ng-model="message.body" ng-show="messageEditToggle ==  message._id" ui-keypress="{13:'saveEdit(message)'}"></textarea>

								<small ng-repeat="tag in message._tags" class="hashtag">{{tag.name}}</small>
							</div>
		
							<div class="clear"></div>
						</li>
					</ul>
				</div>
			</div>
			<!-- / note input and display -->
			
			<!-- username or device -->
			<div id="testing-client" ng-model='subject'>
				
				<div id="timeline-user-input"> </div>
				
				<div id="timeline-user">
					
					<div id="timeline-user-only" ng-hide="subject.testroom">
						<div class="clear"></div>
						
						<div class="timeline-user-avatar">
							<img src="/layout/assets/avatar-large.png">
						</div>
						
						<small>Testing with</small>
						<h2>{{subject.name}}</h2>
						
							
					</div>

					<div id="timeline-user-only" style="top:5%;" ng-show="subject.testroom">
						<canvas id="feed"></canvas>
						<img id='ia' style='display:none;'/>
						<div style='clear'></div>
						<small>Testing with</small>
						<h2>{{subject.name}}</h2>
					</div>

					<div id="cta">
						<div class="cta">
							<button class="button outline" id="endtest" ng-click="postTest()">
								<div class="checkmark"></div>
								<span>End test</span>
							</button>
						</div>
					</div>

				</div>
				
					
			</div>
			<!-- /username or device -->
			
			<div class="clear"></div>
			
		
		</div>
	</div>
	
	
</div>






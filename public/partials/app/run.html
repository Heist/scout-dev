<div id="view-testing">

	<!-- participant definition modal -->
	<div class="modal" ng-model="live" ng-hide="live">

		<div class="module one-third">&nbsp;</div>
		
		<div class="module two-fifths modal-interior">
			
			<div class="modal-interior-title">
				<h2 class="text-center">Run a new test</h2>
			</div>
			
			<ul class="nobullets" ng-model="subject">
				<li ng-class='{"half": kind === "prototype", "full" : kind !== "prototype"}'>
					<label>Participant's name</label>
					<input class="input" type="text" name="participantname" value="" placeholder="Name of the person you’re testing with" ng-model="subject.name"/>
					</input>
				</li>

				<li class="half" ng-show="kind === 'prototype'">
					<label>Room ID</label><span class="info large-tooltip" data-tooltip-large="You’ll find this in the Field Guide iOS app"><span>?</span></span>
					<input class="input" type="text" name="testroom" value="" placeholder="Field Guide app Room ID" ng-model="subject.testroom">
					</input>
				</li>
					<div class="clear"></div>

					<div class="cta-margin">
						<a href="#" class="secondary button-cancel" ng-click="changeOnboard(100)" tabindex="1">Cancel</a>

						<!-- <a class="button dry-run med" type="submit" ng-click="addSubject(subject); changeOnboard(2)">Dry Run</a> -->
				
					<button class="button med float-right" type="submit" ng-enter="addSubject(subject)" ng-click="addSubject(subject)" tabindex="0">Start test</button>
				</div>
			</ul>
			
			</div>
		</ul>
		<div class="clear"></div>
	</div>
	<!-- / participant definition modal -->
	
	<!-- discussion guide -->
	<div id="testing-guide" ng-model="tests">
		
		<div id="tasklist">
						
			<ul>
				<li class="title"><div class="participant-avatar"><span ng-model="initials">{{subject.initials}}</span></div>
					<h3 class="participant-name">{{subject.name}}</h3>
				</li>
				
				<li class="no-highlite">
					<h5>Objectives</h5>
					<pre class="objectives">{{test.desc}}</pre>
				</li>

				<li class="no-highlite">
					<h5>Tasks</h5>
				</li>
				
				<li ng-repeat="obj in navlist" ng-class="{ 'active': obj._id === selected._id }" ng-click="select($index)">
					<h3 class="tag-name">{{obj.name}}</h3>

					<p ng-bind-html="obj.desc | linebreaker"></p>
				</li>
			</ul>
			
		</div>
			
	</div>
	<!-- / discussion guide -->

	<!-- username or device -->
	<div id="testing-client" ng-model="subject">
		
		<div id="timeline-user-input"> </div>
		
		<div id="timeline-user">
			
			<div id="timeline-user-only" ng-hide="subject.testroom">
				<div class="clear"></div>
				
				<div class="timeline-user-avatar">
					<img src="/layout/assets/avatar-large.png">
				</div>
				
				<small>Testing with</small>
				<h2>{{subject.name}}</h2>
			</div>

			<div id="timeline-user-only" style="top:5%;" ng-show="subject.testroom">
				<canvas id="feed"></canvas>
				<img id='ia' style='display:none;'/>
				<div style='clear'></div>
				<small>Testing with</small>
				<h2>{{subject.name}}</h2>
			</div>

		</div>
	</div>
	<!-- /username or device -->

	<!-- toggle on interview or prototype view -->
	<div ng-if="test.kind === 'interview'">
		<ng-include src="'partials/app/_run-interview.html'"></ng-include>
	</div>

	<div ng-if="test.kind === 'prototype'">
		<ng-include src="'partials/app/_run-prototype.html'"></ng-include>
	</div>
	<!-- /toggle on interview or prototype view -->

	<!-- summarize at end of test modal -->
	<div class="modal" ng-model="summarizeTest" ng-if="summarizeTest">
		<ng-include src="'partials/app/_summarize-modal.html'"></ng-include>
	</div>
	
</div>

<script>
	$('#bulletform').on('keypress',function(e){
		var t = $(this);
			console.log(e.which);
		if(e.shiftKey){
			console.log('shifted')
			if(e.which === 13){
				t.val(t.val()+'\n');
				return false;
			}
		}

		if(!e.shiftKey){
			if(e.which === 13){
				t.val(t.val()+'\n• ');
				return false;
			}
		}
	});

	$('#bulletform').on('focus',function(e){
		var t = $(this);
		var l = t.val().length;

		if (l !== 0){
			return false; 
		} else {
			t.val(t.val()+'• ');
			return false;
		}
	});
</script>




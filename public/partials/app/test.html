<!-- Add test -->
<div id="view-editing" ng-model="test">
	<ng-include src="'partials/app/_header-small.html'"></ng-include>
	<ng-include src="'partials/app/_help-bubble.html'"></ng-include>
	
	<div class="container" >
		<!-- <div class="test-setup"> -->
		
		<!-- <div class="module tenth">&nbsp;</div> -->
		
		<div class="module full">
			
			<div class="sheet-holder">
				
				<div class="sheet clearfix">
					<div class="clear"></div>
					
					<div class="container-row clearfix" ng-click="select(test)">
						<div class="container-left"></div>
						<div class="container-right">
							<input class="input-no-border project-name" ng-trim="false" ng-model="test.name" ng-focus="editTitle(test)" ng-blur="blurTitle(test)">
							
							<div class="test-info" ng-if="test.kind === 'interview'" ng-model="report">
								<img src="layout/assets/interview-dark.svg" alt="Interview icon"> Interview

								<div ng-model="selected">
									<a href="{{selected.link}}" target="_">{{selected.link}}</a>
								</div>
							</div>

							<div class="test-info" ng-if="test.kind === 'prototype'">
								<img src="layout/assets/prototype-dark.svg" alt="Interview icon"> Prototype

								<div ng-model="selected">
									<a href="{{selected.link}}" target="_">{{selected.link}}</a>
								</div>
							</div>

						</div>

						<h3 class="container-left">Objectives</h3>
						<div class="container-right">
							<textarea msd-elastic class="objectives input-no-border" id="field-textarea"  ng-model="test.desc" ng-blur="updateTask(test)"></textarea>
						</div>
					</div>
					<!-- tags section goes here -->
					<!-- user enters tag, tag gets store in tag pool-->
					<div class="container-row clearfix">
						<div class="container-left">
							<h3>Tags
							<span class="tooltip-icon" data-tooltip-large="Best for conversational or observational research like Ethnography or Customer Validation."><span>?</span></span>
							</h3>
						</div>
						
						<div class="container-right padding">
							<div class="tags">
								<div class="tag-pool">
									<ul>
										<li ng-repeat="tag in tags">{{tag.name}}</li>
									</ul>
								</div>




								<div class="tag-pool">
									<span ng-repeat="tag in tags" style="padding-left:5px;">
									<span ng-click="removeTag(tag)" style="background:gray; color:black;">&times;</span>  {{tag.name}}</span>
								</div>




								<input name="custom-tags" class="custom-tags" placeholder="Type your own tags to use during your sessions" ng-model="newtag" ng-enter="saveTag(newtag)"></input>
							</div>
						</div>
					</div>
					
					<div class="container-row clearfix">
						<div class="container-left topics">
							<h3>Topics
							<span class="tooltip-icon" data-tooltip-large="Best for conversational or observational research like Ethnography or Customer Validation."><span>?</span></span>
							</h3>
						</div>
						<div class="container-right">
							<div ng-repeat="task in tasks" ng-class="{selected: isActive(task)}" ng-click="select(task)" ng-blur="" id="{{$index}}">
							
							<span ng-click="removeTask(task)">&times;</span>


							<div class="topic-delete icon-delete">
								
							</div>

								<div ng-click="select(task)">
									<form>
										<input class="input-no-border topic-title" ng-trim="false" ng-model="task.name" ng-focus="editTitle(task)" ng-blur="blurTitle(task)">
										<textarea msd-elastic class="task-descriptions input-no-border" id="field-textarea"  ng-model="task.desc" ng-blur="updateTask(task)"></textarea>
									</form>
								</div>
								
								<div class="clear"></div>
							</div>
						</div>
					</div>
					
					<div class="container-row clearfix">
						<div class="container-left"></div>
						<div class="container-right padding">
							<!-- add a new task -->
							<div class="add-task">
								<form ng-model='newtask'>
									<input ng-trim="false" ng-model="newtask.name"placeholder="Write a topic title.."><br/>
									
									<textarea msd-elastic ng-model="newtask.desc" id="bulletform" placeholder="Write a few questions..">
									</textarea>
								</form>
								


								<button ng-if="!newtask.name" class="button full med dark" tabindex="0">Add topic</a></button>
								<button ng-if="newtask.name" type="submit" class="button full med" ng-click="newTask(newtask)" tabindex="0">Add topic</a></button>





								<div class="clear"></div>
							</div>
							<!-- / add a new task -->
						</div>
					</div>
				</div>
				
				</div> <!-- /sheet -->
				</div> <!-- /sheet holder -->
				
				</div> <!-- /module fifths -->
				
				<div class="module done-button">
					<button class="button outline" ng-click="saveAndMove(5)" tabindex="1">Done</button>
				</div>
				<div class="clear"></div>
				<!-- </div> -->
			</div>
		</div>
		<script>
			$('#bulletform').on('keypress',function(e){
				var t = $(this);
					console.log(e.which);
				if(e.shiftKey){
					console.log('shifted')
					if(e.which === 13){
						t.val(t.val()+'\n');
						return false;
					}
				}
				if(!e.shiftKey){
					if(e.which === 13){
						t.val(t.val()+'\n• ');
						return false;
					}
				}
			});
			$('#bulletform').on('focus',function(e){
				var t = $(this);
				var l = t.val().length;
				if (l !== 0){
					return false;
				} else {
					t.val(t.val()+'• ');
					return false;
				}
			});
		</script>
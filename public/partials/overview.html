<div id="view-overview-neu" ng-controller="overview">
	<div id="header">
		
		<div id="header-logo">
			&nbsp;
		</div>
		
		<div id="header-title">Tests</div>
		
		<div id="header-account">
			<div id="header-account-avatar">
				<img src="https://s3.amazonaws.com/uifaces/faces/twitter/jackiesaik/128.jpg">
			</div>
			<div id="header-account-dropdown">&#9662;</div>
		</div>
		
	
					
	
	</div>
	
	<!-- / header nav -->
	
	<div id="left-pane" ng-model="sessions">
		
		<div id="questions">
			
			<div class="questions-group active">
				<ul>
					<li class="test-newtest">
						<div class="test-newtest-create">
							<button class="button" ng-click="addSession()">+ Add a new test</button>		
						</div>
					</li>
					
					<li class="question" ng-repeat="session in sessions track by $index" ng-click="select(session)" ng-class="{ 'active': session._id == selected._id}">
						<div class="test-controls">
							<button class="button small secondary" ng-click="runTest(session)" ng-show="session.flows.length > 0 && session.flows[0].steps.length > 0">Run Test</button>
							
							<button class="button small" ng-click="loadReport(session._id)" ng-show="session.runcount > 0">Report</button>
							
							<button class="button small destructive" ng-click="removeSession(session)">&times;</button> 
						</div>
						
						<div class="session-name">
							<h4 ng-hide="session.editing">
								<img src="/assets/pencil-rev.svg" ng-click="editTitle(session)">&nbsp;&nbsp;{{session.name}} {{session.runcount}}
							</h4>
							<form ng-show="session.editing">
								<input class="edit input" ng-trim="true" ng-model="session.name" ng-focus="editTitle(session)" ng-blur="blurTitle(session)">
							</form>
						</div>
						<small ng-show='flow.updated > flow.created'>Last run {{flow.updated | date: 'MMM dd, yyyy'}} / 
							<ng-pluralize count="ssincount"
		                		when="{'0': 'Never run.',
		                       'one': 'One participants',
		                       'other': '{} participants'}">
  							</ng-pluralize>
  					</small>	
					</li>
				</ul>
			</div>
			
	
		</div>
			
	</div>
	
	
	<div id="large-pane">
	
	<!-- show the flows associated with this test -->
		<div ng-model="selected" ng-show="selected">
			<h3><span>{{selected.name}}</span></h3>
			
				
			<div class="session-flow" ng-repeat="flow in selected.flows | orderBy:'created'">
				<div class="flow-hamburger">
					&equiv;
				</div>
			
				<div class="session-flow-controls">
					<button class="button small" ng-click="summarizeFlow(flow._id)" ng-show="selected.runcount > 0" >Summarize</button>

					<button class="button small" ng-click="summarizeFlow(flow._id)" ng-show="flow.summary" >Summary</button>
					
					&nbsp;&nbsp;
					
					<!-- TODO: we want to view a report just for this flow -->
					<button class="button small" ng-click="viewFlowReport(flow, selected._id)" ng-show="flow.summary" >View Report</button> 
					
					&nbsp;&nbsp;

					<button class="button small secondary" ng-click="editFlow(flow)" ng-hide="flow.count > 0" >Edit</button>
					
					<button class="button small destructive" ng-click="removeFlow(flow)">&times;</button>
				</div>	
				
				<small>Flow 
					<ng-pluralize count="flow.count"
                		when="{'0': 'never run.',
                       'one': 'run once.',
                       '2': 'run twice.',
                       'other': 'run {} times.'}">
					</ng-pluralize>
  				</small>
				<h3>{{flow.name}}</h3>
				<p>{{flow.summary}}</p>
				<div class="clear"></div>
				
			</div>	
				
				
			<div class="session-flow empty">
				<button class="button" ng-click="postFlow(selected)">+ Add a new flow</button>		
			</div>	</div>
			
	</div>
</div>
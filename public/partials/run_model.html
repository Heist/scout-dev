<div id="view-testing" ng-controller="runSession">
	
	<div id="header">
		
		<div id="header-logo">
			<img src="../assets/scout-rev.png" />
		</div>
		
		<div id="header-title">Testing &ldquo;{{session.name}}&rdquo;</div>
		
		<div id="header-account">
			<div id="header-account-avatar">
				<img src="https://s3.amazonaws.com/uifaces/faces/twitter/jackiesaik/128.jpg">
			</div>
			<div id="header-account-dropdown">&#9662;</div>
		</div>
		
		
		<div id="header-nav">
			<button class="button secondary small">Mute Mic</button>
			<button class="button small"><a href="/">Stop Testing</a></button>
		</div>
				
				
	
	</div>
	
	<!-- / header nav -->
	
	
	
	<!-- create a flow -->
	
	<div id="left-pane">
		
		<div id="questions">
	
			<div class="questions-group" ng-repeat="flow in flows" ng-class="{ 'active': $index == parentIndex }">
				<small>Flow</small>
				<h3>{{flow.title}}</h3>
				<ul>
					<li ng-repeat="step in flow.steps" 
						ng-class="{ 'active': $index == selectedIndex && $parent.$index == parentIndex }"
             			ng-click="activate($index, $parent.$index)">
						<h3>{{step.title}}</h3>
						<p>{{step.desc}}</p>
					</li>
				</ul>
			</div>
			
		</div>
			
	</div>
	
	<div id="middle-pane" >
		
		<div id="session-input" >
			<textarea class="input" name="field-input" placeholder="Your notes" /></textarea>
		</div>

<!-- 
	middle panel
	on click new flow, post flow name to messages
	on click new step, post step to messages
	on enter message, post to messages
	on enter #xyz, app should note [#thing] and post to tags
	url should have user name

message feed is a document of all notes in play
is it appended to step that is currently turned on?

get all messages in session by flow and step
put them into the flow 
add new messages to current step in current flow.

message structure should be formed on the back end by parsing the contents of 
session.flow.steps

clicking a step inserts a message into the flow but not into the database

stepClick
	-- easiest would be that stream is array of messages
	-- inserts into stream
	-- stream is a temp variable array that stores current chat
	-- stream pulls from both $scope.session[session].flows[flow].steps[step].messages
	-- AND stepClick assertion
	-- stream does not write back to DB
	-- text box writes directly to DB

writing a message puts the message into the DB and into the flow
	-- inserts into database under 'steps'
	-- inserts into stream, but stream does not write to DB

on click step
------ 

ng-class="{status: startSession(whateverElementTriggersThis), title: flowOrStepChange(whateverElementTriggersThis) }" ng-repeat="message in stream"
-->

		<div id="timeline" >
			<ul ng-model='stream'>
						
				<li class="message" >
					<div class="message-user"> <!-- misleading, is JUST user images -->
							<div class="message-details-avatar">
								 <!-- {{message.avatar}} 
								how are we storing and recalling these? -->
								 <img src="https://s3.amazonaws.com/uifaces/faces/twitter/jackiesaik/128.jpg" />
							</div>
					</div>

					<div class="message-body">
						<!-- {{message.body}} -->
						<!-- if this is a new session -->						
						<strong>Starting Session</strong>
						<!-- if this is a step change -->
						<small>Starting flow</small><br><strong>&ldquo;User Account Change&rdquo;</strong>
						<!-- normal  -->
						<p>This is the body of this message but a longer one this time hello how are you <span class="tag">#quote</span></p>

					</div>
					
					<div class="message-details"> <!-- should be message-details -->
						<small><!-- {{message.user}} &mdash; {{message.created | date : HH:mm}}--></small>
					</div>

					<div class="clear"></div>
				</li>
				
			
			</ul>
		</div>
		
	</div>
	
	
	
	
	<div id="right-pane">
		
		<div id="stream-user">
			<div class="stream-user-avatar">
				<img src="http://rdjpg.com/30/30">
			</div>
			
			Robertolomew Downeyjunior
			
		</div>
		
		<div id="stream-device">
			<div class="stream-device-device">
				<img src="../assets/device-stream.jpg" />
			</div>
		</div>
		
		<div id="stream-timer">
			<h3>05:37</h3>
		</div>
			
	</div>
</div>
<!-- summary.html -->

<div id="view-summarizing" ng-controller="summary">

<div ng-model='flow'>


<ng-include src="'partials/header.html'"></ng-include>

<!-- / header nav -->


<!-- create a flow -->

<div id="left-pane" >
	
	<div id="questions">
		
		<div class="questions-group active">
			<ul>
				<li ng-model='flow' ui-sref=".flow" ng-click="activate($index, $parent.$index, flow)"><!-- flow title --><small>Flow</small><br/>
					{{flow.title}}</li>
				<li class="question" ng-repeat="step in flow.steps" ng-class="{ 'active': $index == selectedIndex && $parent.$index == parentIndex }" ng-click="activate($index, $parent.$index, step)"
				ui-sref=".step">
					<span>{{step.name}}</span>
					
					<div class="step-rating" ng-click="passFail(step)">
						<img src="/assets/rate-positive.svg" ng-show="step.pass_fail == true"/>
						<img src="/assets/rate-negative.svg" ng-show="step.pass_fail == false">
					</div>
					
					<h3>{{step.name}}</h3>
					<p class="question-body" ng-show="$index == selectedIndex && $parent.$index == parentIndex">
						{{step.desc}}
					</p>
				</li>
			</ul>
		</div>
	</div>		
</div>

<div id="middle-pane" ui-view >
	<!-- looking for your flow summary partials? they're in summary_flow and summary_step -->
</div>


<div id="right-pane" ng-model='step'>
	
	<div id="timeline" ng-show="step.name">
		<ul>
				
			<li class="message status">
				<div class="message-details">
					<div class="message-details-avatar">
						&bull;
					</div>
				</div>
				<div class="message-body">All notes for &ldquo;{{step.name}}&rdquo;</div>
				<div class="clear"></div>
			</li>
			
			
			<!-- timelines on timelines -->
			
			<span ng-repeat="user in step.session_by_user">
			
				<li class="message message-title">
					<div class="message-details">
						<div class="message-details-avatar">
							&nbsp;
						</div>
					</div>
					<div class="message-body">
						<small>Comments for participant</small>
						<p>{{user.user}}</p>
					</div>
					
					<div class="clear"></div>
				</li>	
					
					
						<!-- embedded timeline -->
								
					<span ng-repeat="message in user.messages">		
						<li class="message">
							<div class="message-details">
								<div class="message-details-avatar">&bull;</div>
							</div>						
							
							<div class="message-body">
								<p ng-bind-html="message.body | hashtag"></p>
								<small>{{message.created | date : 'HH:mm' }}</small>
							</div>
			
							<div class="message-fave">
								<a ng-click="saveFav(message)" ng-if="message.fav">
									&#9733;
								</a>
								<a ng-click="saveFav(message)" ng-if="!message.fav">
									&#9734;
								</a>
							</div>
							<div class="clear"></div>
						</li>
						</ul>	
					</span>
			
			</span>
					

		</ul>
	</div>
	
		
</div>
<!-- / create a flow -->
</div>